# Supabase Database Setup

Run these SQL commands in your Supabase SQL Editor to set up the database schema.

## 1. Create the todos table

```sql
create table todos (
  id bigint generated by default as identity primary key,
  user_id uuid references auth.users not null,
  text text not null,
  completed boolean default false,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);
```

## 2. Enable Row Level Security (RLS)

```sql
alter table todos enable row level security;
```

## 3. Create RLS Policies

Allow users to see only their own todos:

```sql
create policy "Users can view their own todos"
  on todos for select
  using (auth.uid() = user_id);
```

Allow users to insert their own todos:

```sql
create policy "Users can insert their own todos"
  on todos for insert
  with check (auth.uid() = user_id);
```

Allow users to update their own todos:

```sql
create policy "Users can update their own todos"
  on todos for update
  using (auth.uid() = user_id);
```

Allow users to delete their own todos:

```sql
create policy "Users can delete their own todos"
  on todos for delete
  using (auth.uid() = user_id);
```

## 4. Enable Realtime

```sql
alter publication supabase_realtime add table todos;
```

## 5. Create an index for better performance

```sql
create index todos_user_id_idx on todos(user_id);
```

---

## Quick Setup Instructions

1. Go to your Supabase project dashboard
2. Click on "SQL Editor" in the left sidebar
3. Click "New Query"
4. Copy and paste ALL the SQL commands above
5. Click "Run" to execute

That's it! Your database is now ready for real-time todos.
